/* src/components/ui/Table/Table.module.css */

.tableContainer {
    width: 100%;
    overflow-x: auto;
}

.table {
    width: 100%;
    border-collapse: collapse;
    margin: 0 auto;
    font-size: var(--font-size-xxs);
    background: var(--surface-light);
    border: 2px solid var(--border-light); /* Accounting style border */
    font-family: var(--font-family-base); /* Use Roboto instead of Courier New */
    border-radius: var(--border-radius-sm);
    overflow: hidden;
}

.table th,
.table td {
    padding: var(--space-xxs);
    text-align: left;
    color: var(--text-primary);
    border: 1px solid var(--border-light);
    vertical-align: middle;
    font-size: inherit;
}

.table th {
    padding: var(--space-xxs) var(--space-xs);
    background: var(--surface-dark);
    color: var(--text-primary);
    font-weight: var(--font-weight-bold);
    position: sticky;
    top: 0;
    z-index: 1;
    border-bottom: 2px solid var(--border-light); /* Accounting style header border */
    text-align: left; 
    white-space: nowrap;
    font-family: var(--font-family-base); /* Ensure Roboto in headers */
}

.table tr:nth-child(even) {
    background: var(--table-row-even-bg);
}

.table tr:hover {
    background: var(--table-row-hover-bg);
}

.table tr {
    fill: var(--white);
    pointer-events: auto;
    font-weight: 400;
    text-shadow: none;
    cursor: default;
    transition: background 0.15s;
}

.tableInput {
    width: 100%;
    padding: var(--space-xxs) var(--space-xxs);
    border: 1px solid var(--border-light);
    border-radius: var(--border-radius-sm);
    background-color: var(--background-light);
    color: var(--text-primary);
    font-size: var(--font-size-xxs);
    font-family: var(--font-family-base); /* Roboto for inputs */
    transition: all var(--transition-speed-fast) var(--transition-ease);
    height: calc(var(--font-size-xxs) + (var(--space-xxs) * 2) + 2px);
    box-sizing: border-box;
    max-width: none;
}

.tableSelect {
    width: auto;
    max-width: 100%;
    box-sizing: border-box;
    padding: var(--space-xxs) var(--space-xxs);
    border: 1px solid var(--border-light);
    border-radius: var(--border-radius-sm);
    background-color: var(--background-light);
    color: var(--text-primary);
    font-size: var(--font-size-xxs);
    font-family: var(--font-family-base); /* Roboto for selects */
    transition: all var(--transition-speed-fast) var(--transition-ease);
}

.tableInput:focus,
.tableSelect:focus {
    outline: none;
    box-shadow: var(--focus-ring);
    border-color: var(--color-primary);
}

.removeButton,
.addButton {
    padding: var(--space-xxs) var(--space-xs);
    font-size: var(--font-size-xxs);
    font-family: var(--font-family-base); /* Roboto for buttons */
    border-radius: var(--border-radius-sm);
    cursor: pointer;
    transition: background-color 0.2s ease;
    white-space: nowrap;
}

.removeButton {
    background: var(--status-danger);
    color: var(--text-on-primary);
    border: 1.5px solid var(--status-danger);
    font-weight: var(--font-weight-bold);
    font-size: var(--font-size-sm);
    line-height: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    min-width: 90px;
    box-sizing: border-box;
    transition: background 0.18s, color 0.18s, box-shadow 0.18s;
}

.removeButton:hover:not(:disabled) {
    background: var(--status-danger);
    transform: scale(1.05);
    box-shadow: 0 0 0 2px rgba(244, 67, 54, 0.3), var(--shadow-md);
    filter: brightness(1.1);
}

.removeButton:active {
    transform: scale(0.98);
    box-shadow: 0 0 0 2px rgba(244, 67, 54, 0.5), var(--shadow-sm);
}

.addButton {
    background-color: var(--color-primary);
    color: var(--text-on-primary);
    border: 1px solid var(--color-primary);
    width: 100%;
}

.addButton:hover,
.addButton:focus {
    background-color: var(--color-primary-light);
    border-color: var(--color-primary-light);
    filter: brightness(1.08);
}

.tableSection {
    margin-bottom: var(--space-md);
}


/* --- Table Header Title (used in SectionHeader) --- */
.tableHeaderTitle {
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-semibold);
    color: var(--text-primary);
    margin: 0;
}

.noResults {
    text-align: center;
    padding: var(--space-md);
    color: var(--text-secondary);
    font-size: var(--font-size-sm);
    font-family: var(--font-family-base); /* Roboto for no results */
}

.alignRight {
    text-align: right;
}

/* Standard select styling - ensure Roboto throughout */
select,
.filterSelect,
.tableSelect {
    font-family: var(--font-family-base);
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%238A8FA3'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 8px center;
    background-size: 16px;
    padding-right: 32px;
}

/* Large App Mode Overrides */
:global(.largeApp) .table {
    font-size: var(--font-size-xs);
    border: 2px solid var(--border-light); /* Keep accounting border */
}

:global(.largeApp) .table th,
:global(.largeApp) .table td {
    padding: var(--space-xs) var(--space-sm);
    font-size: var(--font-size-xs);
}

:global(.largeApp) .tableInput,
:global(.largeApp) .tableSelect {
    font-size: var(--font-size-xs);
    padding: var(--space-xs);
}

.table td input[type="text"],
.table td input[type="number"],
.table td select {
    font-family: var(--font-family-base); /* Ensure Roboto in table inputs */
}

/* Category-specific select border and option backgrounds */
.tableSelect.required {
    border-color: var(--status-success);
}

.tableSelect.flexible {
    border-color: var(--status-warning);
}

.tableSelect.nonessential {
    border-color: var(--color-secondary);
}

.tableSelect option.required {
    background-color: var(--status-success);
    color: white;
}

.tableSelect option.flexible {
    background-color: var(--status-warning);
    color: white;
}

.tableSelect option.nonessential {
    background-color: var(--color-secondary);
    color: white;
}

/* Category-specific styling for expense categories */
.categoryTag {
    padding: var(--space-xxs) var(--space-xs);
    border-radius: var(--border-radius-sm);
    font-size: var(--font-size-xxs);
    font-weight: var(--font-weight-medium);
    font-family: var(--font-family-base); /* Roboto for category tags */
    color: white;
    text-align: center;
}

.categoryTag.required {
    background-color: var(--status-success);
}

.categoryTag.flexible {
    background-color: var(--status-warning);
}

.categoryTag.nonessential {
    background-color: var(--color-secondary);
}

/* Professional synced indicator - only for view mode */
.syncedIndicator {
    color: var(--color-primary);
    font-style: italic;
    font-weight: var(--font-weight-medium);
    margin-left: var(--space-xs);
    font-size: var(--font-size-xxs);
    font-family: var(--font-family-base); /* Roboto for synced indicator */
}

/* Category badges for view mode - more professional looking */
.categoryBadge {
    display: inline-block;
    padding: var(--space-xxs) var(--space-xs);
    border-radius: var(--border-radius-sm);
    font-size: var(--font-size-xxs);
    font-weight: var(--font-weight-medium);
    font-family: var(--font-family-base); /* Roboto for category badges */
    color: white;
    text-align: center;
    min-width: 80px;
}

.categoryBadge.required {
    background-color: var(--status-success);
}

.categoryBadge.flexible {
    background-color: var(--status-warning);
}

.categoryBadge.nonessential {
    background-color: var(--color-secondary);
}

/* FIXED: Category-specific select border colors for edit mode */
.tableSelect.required {
  border-color: #dc3545; /* Red for required */
}

.tableSelect.flexible {
  border-color: #ff9800; /* Orange for flexible (unchanged) */
}

.tableSelect.nonessential {
  border-color: #28a745; /* Green for non-essential */
}

/* FIXED: Ensure focus states work properly with category colors */
.tableSelect:focus.required {
  border-color: #dc3545;
  box-shadow: 0 0 0 2px rgba(220, 53, 69, 0.2);
}

.tableSelect:focus.flexible {
  border-color: #ff9800;
  box-shadow: 0 0 0 2px rgba(255, 152, 0, 0.2);
}

.tableSelect:focus.nonessential {
  border-color: #28a745;
  box-shadow: 0 0 0 2px rgba(40, 167, 69, 0.2);
}

/* Style for calculated/read-only fields in tables */
.calculatedField {
    background: var(--surface-dark);
    color: var(--text-secondary);
    border: 1px solid var(--border-light);
    border-radius: var(--border-radius-sm);
    padding: var(--space-xxs);
    font-family: var(--font-family-base); /* Roboto for calculated fields */
    font-weight: var(--font-weight-medium);
    text-align: right;
}

.calculatedField:focus {
    outline: none;
    border-color: var(--border-light);
}

/* Add better spacing for income table */
.tableInput[placeholder="25.00"],
.tableInput[placeholder="2080"],
.tableInput[placeholder="75000"],
.tableInput[placeholder="4100"] {
    text-align: right;
    font-family: var(--font-family-base); /* Roboto for number inputs */
}

/* Compact select styling for narrow columns */
.compactSelect {
  min-width: 120px;
  max-width: 150px;
  font-size: var(--font-size-xs);
}

/* Text wrapping for longer content */
.wrappedText {
  display: block;
  word-wrap: break-word;
  hyphens: auto;
  line-height: 1.2;
  max-width: 120px;
}

/* Muted text for N/A values */
.mutedText {
  color: var(--text-secondary);
  font-style: italic;
  font-size: var(--font-size-xs);
}

/* Center alignment */
.alignCenter {
  text-align: center;
  vertical-align: middle;
}

/* Column width controls */
.accountsTable {
  table-layout: fixed;
  width: 100%;
}

.accountsTable th:nth-child(1) { width: 15%; } /* Account Name */
.accountsTable th:nth-child(2) { width: 12%; } /* Provider */
.accountsTable th:nth-child(3) { width: 12%; } /* Balance */
.accountsTable th:nth-child(4) { width: 10%; } /* Interest Rate */
.accountsTable th:nth-child(5) { width: 10%; } /* Monthly Payment */
.accountsTable th:nth-child(6) { width: 10%; } /* Category */
.accountsTable th:nth-child(7) { width: 12%; } /* Type */
.accountsTable th:nth-child(8) { width: 12%; } /* Tax Status */
.accountsTable th:nth-child(9) { width: 12%; } /* Portfolio */
.accountsTable th:nth-child(10) { width: 5%; }  /* Actions */

/* Responsive adjustments for small apps */
:global(.smallApp) .accountsTable th:nth-child(1) { width: 20%; }
:global(.smallApp) .accountsTable th:nth-child(2) { width: 15%; }
:global(.smallApp) .accountsTable th:nth-child(3) { width: 15%; }
:global(.smallApp) .accountsTable th:nth-child(4) { width: 8%; }
:global(.smallApp) .accountsTable th:nth-child(5) { width: 8%; }
:global(.smallApp) .accountsTable th:nth-child(6) { width: 8%; }
:global(.smallApp) .accountsTable th:nth-child(7) { width: 10%; }
:global(.smallApp) .accountsTable th:nth-child(8) { width: 10%; }
:global(.smallApp) .accountsTable th:nth-child(9) { width: 10%; }
:global(.smallApp) .accountsTable th:nth-child(10) { width: 6%; }

/* Better select dropdown styling */
.tableSelect {
  width: 100%;
  padding: var(--space-xxs);
  font-size: var(--font-size-xs);
  border: 1px solid var(--border-light);
  border-radius: var(--border-radius-sm);
  background: var(--background-light);
  color: var(--text-primary);
  cursor: pointer;
}

.tableSelect:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 2px rgba(0, 177, 199, 0.2);
}

/* Ensure dropdown options wrap properly */
.tableSelect option {
  padding: var(--space-xxs);
  white-space: normal;
  word-wrap: break-word;
}

/* ADDED: Standardized action buttons for editable tables */
.actionButton {
  width: 28px;
  height: 28px;
  border: none;
  border-radius: var(--border-radius-sm);
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-bold);
  transition: all var(--transition-speed-fast) var(--transition-ease);
  position: relative;
  outline: none;
  box-shadow: var(--shadow-sm);
}

.actionButton:focus-visible {
  outline: 2px solid var(--border-active);
  outline-offset: 2px;
}

/* Add button - Primary green */
.addButton {
  background: var(--status-success);
  color: var(--text-on-primary);
  border: 1.5px solid var(--status-success);
}

.addButton:hover:not(:disabled) {
  background: var(--status-success);
  transform: scale(1.05);
  box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.3), var(--shadow-md);
  filter: brightness(1.1);
}

.addButton:active {
  transform: scale(0.98);
  box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.5), var(--shadow-sm);
}

.addButton:disabled {
  background: var(--interactive-disabled-bg);
  color: var(--interactive-disabled-text);
  border-color: var(--interactive-disabled-bg);
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
  filter: none;
}

/* Remove button - Danger red */
.removeButton {
  background: var(--status-danger);
  color: var(--text-on-primary);
  border: 1.5px solid var(--status-danger);
  font-weight: var(--font-weight-bold);
  font-size: var(--font-size-sm);
  line-height: 1;
  display: flex;
  align-items: center;
  justify-content: center;
}

.removeButton:hover:not(:disabled) {
  background: var(--status-danger);
  transform: scale(1.05);
  box-shadow: 0 0 0 2px rgba(244, 67, 54, 0.3), var(--shadow-md);
  filter: brightness(1.1);
}

.removeButton:active {
  transform: scale(0.98);
  box-shadow: 0 0 0 2px rgba(244, 67, 54, 0.5), var(--shadow-sm);
}

/* X icon styling for remove buttons */
.removeIcon {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-bold);
  line-height: 1;
}

/* Large app scaling */
:global(.largeApp) .removeIcon {
  font-size: var(--font-size-base);
}

/* Small app adjustments */
:global(.smallApp) .removeIcon {
  font-size: var(--font-size-xs);
}

/* Icon styling within action buttons */
.actionButton .buttonIcon {
  width: 14px;
  height: 14px;
  stroke-width: 2.5;
}

/* Action button container for proper spacing */
.actionButtonGroup {
  display: flex;
  gap: var(--space-xs);
  align-items: center;
  justify-content: center;
}

/* Large app scaling */
:global(.largeApp) .actionButton {
  width: 32px;
  height: 32px;
  font-size: var(--font-size-base);
}

:global(.largeApp) .actionButton .buttonIcon {
  width: 16px;
  height: 16px;
}

/* Small app adjustments */
:global(.smallApp) .actionButton {
  width: 24px;
  height: 24px;
  font-size: var(--font-size-xs);
}

:global(.smallApp) .actionButton .buttonIcon {
  width: 12px;
  height: 12px;
}

/* Update existing button styles to be consistent */
.tableInput,
.tableSelect {
  border: 1.5px solid var(--border-light);
  transition: border-color var(--transition-speed-fast) var(--transition-ease), 
              box-shadow var(--transition-speed-fast) var(--transition-ease);
}

.tableInput:focus,
.tableSelect:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 2px rgba(0, 177, 199, 0.2);
}