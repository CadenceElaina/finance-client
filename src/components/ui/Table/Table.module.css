/* src/components/ui/Table/Table.module.css */

.tableContainer {
    width: 100%;
    overflow-x: auto;
}

.table {
    width: 100%;
    border-collapse: collapse;
    margin: 0 auto;
    font-size: var(--font-size-xxs);
    background: var(--surface-light);
    border: 2px solid var(--border-light); /* Accounting style border */
    font-family: var(--font-family-base); /* Use Roboto instead of Courier New */
    border-radius: var(--border-radius-sm);
    overflow: hidden;
}

.table th,
.table td {
    padding: var(--space-xxs);
    text-align: left;
    color: var(--text-primary);
    border: 1px solid var(--border-light);
    vertical-align: middle;
    font-size: inherit;
}

.table th {
    padding: var(--space-xxs) var(--space-xs);
    background: var(--surface-dark);
    color: var(--text-primary);
    font-weight: var(--font-weight-bold);
    position: sticky;
    top: 0;
    z-index: 1;
    border-bottom: 2px solid var(--border-light); /* Accounting style header border */
    text-align: left; 
    white-space: nowrap;
    font-family: var(--font-family-base); /* Ensure Roboto in headers */
}

.table tr:nth-child(even) {
    background: var(--table-row-even-bg);
}

.table tr:hover {
    background: var(--table-row-hover-bg);
}

.table tr {
    fill: var(--white);
    pointer-events: auto;
    font-weight: 400;
    text-shadow: none;
    cursor: default;
    transition: background 0.15s;
}

.tableInput {
    width: 100%;
    padding: var(--space-xxs) var(--space-xxs);
    border: 1px solid var(--border-light);
    border-radius: var(--border-radius-sm);
    background-color: var(--background-light);
    color: var(--text-primary);
    font-size: var(--font-size-xxs);
    font-family: var(--font-family-base); /* Roboto for inputs */
    transition: all var(--transition-speed-fast) var(--transition-ease);
    height: calc(var(--font-size-xxs) + (var(--space-xxs) * 2) + 2px);
    box-sizing: border-box;
    max-width: none;
}

.tableSelect {
    width: auto;
    max-width: 100%;
    box-sizing: border-box;
    padding: var(--space-xxs) var(--space-xxs);
    border: 1px solid var(--border-light);
    border-radius: var(--border-radius-sm);
    background-color: var(--background-light);
    color: var(--text-primary);
    font-size: var(--font-size-xxs);
    font-family: var(--font-family-base); /* Roboto for selects */
    transition: all var(--transition-speed-fast) var(--transition-ease);
}

.tableInput:focus,
.tableSelect:focus {
    outline: none;
    box-shadow: var(--focus-ring);
    border-color: var(--color-primary);
}

.removeButton,
.addButton {
    padding: var(--space-xxs) var(--space-xs);
    font-size: var(--font-size-xxs);
    font-family: var(--font-family-base); /* Roboto for buttons */
    border-radius: var(--border-radius-sm);
    cursor: pointer;
    transition: background-color 0.2s ease;
    white-space: nowrap;
}

.removeButton {
    background: var(--status-danger);
    color: var(--text-on-primary);
    border: 1.5px solid var(--status-danger);
    font-weight: var(--font-weight-bold);
    font-size: var(--font-size-sm);
    line-height: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    min-width: 90px;
    box-sizing: border-box;
    transition: background 0.18s, color 0.18s, box-shadow 0.18s;
}

.removeButton:hover:not(:disabled) {
    background: var(--status-danger);
    transform: scale(1.05);
    box-shadow: 0 0 0 2px rgba(244, 67, 54, 0.3), var(--shadow-md);
    filter: brightness(1.1);
}

.removeButton:active {
    transform: scale(0.98);
    box-shadow: 0 0 0 2px rgba(244, 67, 54, 0.5), var(--shadow-sm);
}

.addButton {
    background-color: var(--color-primary);
    color: var(--text-on-primary);
    border: 1px solid var(--color-primary);
    width: 100%;
}

.addButton:hover,
.addButton:focus {
    background-color: var(--color-primary-light);
    border-color: var(--color-primary-light);
    filter: brightness(1.08);
}

.tableSection {
    margin-bottom: var(--space-md);
}


/* --- Table Header Title (used in SectionHeader) --- */
.tableHeaderTitle {
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-semibold);
    color: var(--text-primary);
    margin: 0;
}

.noResults {
    text-align: center;
    padding: var(--space-md);
    color: var(--text-secondary);
    font-size: var(--font-size-sm);
    font-family: var(--font-family-base); /* Roboto for no results */
}

.alignRight {
    text-align: right;
}

/* Standard select styling - ensure Roboto throughout */
select,
.filterSelect,
.tableSelect {
    font-family: var(--font-family-base);
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%238A8FA3'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 8px center;
    background-size: 16px;
    padding-right: 32px;
}

/* Large App Mode Overrides */
:global(.largeApp) .table {
    font-size: var(--font-size-xs);
    border: 2px solid var(--border-light); /* Keep accounting border */
}

:global(.largeApp) .table th,
:global(.largeApp) .table td {
    padding: var(--space-xs) var(--space-sm);
    font-size: var(--font-size-xs);
}

:global(.largeApp) .tableInput,
:global(.largeApp) .tableSelect {
    font-size: var(--font-size-xs);
    padding: var(--space-xs);
}

.table td input[type="text"],
.table td input[type="number"],
.table td select {
    font-family: var(--font-family-base); /* Ensure Roboto in table inputs */
}

/* Category-specific select border and option backgrounds */
.tableSelect.required {
    border-color: var(--status-success);
}

.tableSelect.flexible {
    border-color: var(--status-warning);
}

.tableSelect.nonessential {
    border-color: var(--color-secondary);
}

.tableSelect.goal {
    border-color: var(--color-primary);
}

.tableSelect.debt {
    border-color: var(--color-secondary);
}

.tableSelect option.required {
    background-color: var(--status-success);
    color: white;
}

.tableSelect option.flexible {
    background-color: var(--status-warning);
    color: white;
}

.tableSelect option.nonessential {
    background-color: var(--color-secondary);
    color: white;
}

/* Category-specific styling for expense categories */
.categoryTag {
    padding: var(--space-xxs) var(--space-xs);
    border-radius: var(--border-radius-sm);
    font-size: var(--font-size-xxs);
    font-weight: var(--font-weight-medium);
    font-family: var(--font-family-base); /* Roboto for category tags */
    color: white;
    text-align: center;
}

.categoryTag.required {
    background-color: var(--status-success);
}

.categoryTag.flexible {
    background-color: var(--status-warning);
}

.categoryTag.nonessential {
    background-color: var(--color-secondary);
}

/* FIXED: Category-specific select border colors for edit mode */
.tableSelect.required {
    border-color: var(--status-danger) !important;
    box-shadow: 0 0 0 1px var(--status-danger);
}

.tableSelect.flexible {
    border-color: var(--status-warning) !important;
    box-shadow: 0 0 0 1px var(--status-warning);
}

.tableSelect.nonessential {
    border-color: var(--status-success) !important;
    box-shadow: 0 0 0 1px var(--status-success);
}

.tableSelect.goal {
    border-color: var(--color-primary) !important;
    box-shadow: 0 0 0 1px var(--color-primary);
}

.tableSelect.debt {
    border-color: var(--color-secondary) !important;
    box-shadow: 0 0 0 1px var(--color-secondary);
}

/* FIXED: Ensure focus states work properly with category colors */
.tableSelect:focus.required {
    border-color: var(--status-danger) !important;
    box-shadow: 0 0 0 2px rgba(220, 53, 69, 0.25);
}

.tableSelect:focus.flexible {
    border-color: var(--status-warning) !important;
    box-shadow: 0 0 0 2px rgba(255, 152, 0, 0.25);
}

.tableSelect:focus.nonessential {
    border-color: var(--status-success) !important;
    box-shadow: 0 0 0 2px rgba(40, 167, 69, 0.25);
}

.tableSelect:focus.goal {
    border-color: var(--color-primary) !important;
    box-shadow: 0 0 0 2px rgba(0, 177, 199, 0.25);
}

.tableSelect:focus.debt {
    border-color: var(--color-secondary) !important;
    box-shadow: 0 0 0 2px rgba(108, 117, 125, 0.25);
}

/* Category badges for view mode - more professional looking */
.categoryBadge {
    display: inline-block;
    padding: var(--space-xxs) var(--space-xs);
    border-radius: var(--border-radius-sm);
    font-size: var(--font-size-xxs);
    font-weight: var(--font-weight-medium);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border: 1px solid transparent;
}

.categoryBadge.required {
    background-color: rgba(220, 53, 69, 0.1);
    color: var(--status-danger);
    border-color: var(--status-danger);
}

.categoryBadge.flexible {
    background-color: rgba(255, 152, 0, 0.1);
    color: var(--status-warning);
    border-color: var(--status-warning);
}

.categoryBadge.nonessential {
    background-color: rgba(40, 167, 69, 0.1);
    color: var(--status-success);
    border-color: var(--status-success);
}

.categoryBadge.goal {
    background-color: rgba(0, 177, 199, 0.1);
    color: var(--color-primary);
    border-color: var(--color-primary);
}

.categoryBadge.debt {
    background-color: rgba(108, 117, 125, 0.1);
    color: var(--color-secondary);
    border-color: var(--color-secondary);
}

/* Professional synced indicator - only for view mode */
.syncedIndicator {
    color: var(--text-secondary);
    font-style: italic;
    display: flex;
    align-items: center;
    gap: var(--space-xxs);
}

.syncedIndicator::before {
    content: "ðŸ”—";
    font-size: var(--font-size-xxs);
    opacity: 0.7;
}

/* Option styling for category selects */
.tableSelect option.required {
    background-color: rgba(220, 53, 69, 0.1);
    color: var(--status-danger);
}

.tableSelect option.flexible {
    background-color: rgba(255, 152, 0, 0.1);
    color: var(--status-warning);
}

.tableSelect option.nonessential {
    background-color: rgba(40, 167, 69, 0.1);
    color: var(--status-success);
}

/* ENHANCED: Standardized action buttons for all editable tables */
.actionButton {
  background: none;
  border: 1px solid transparent;
  color: var(--text-secondary);
  padding: var(--space-xxs);
  border-radius: var(--border-radius-sm);
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-speed-fast) var(--transition-ease);
  min-width: 24px;
  min-height: 24px;
  position: relative;
}

.actionButton:focus-visible {
  outline: 2px solid var(--border-active);
  outline-offset: 2px;
}

/* Add button - Professional green */
.addButton {
  background: var(--color-success);
  color: var(--text-on-primary);
  border: 1px solid var(--color-success);
  box-shadow: var(--shadow-sm);
}

.addButton:hover:not(:disabled) {
  background: var(--color-success);
  filter: brightness(1.1);
  border-color: var(--color-success);
  box-shadow: var(--shadow-md);
  transform: translateY(-1px);
}

.addButton:active {
  transform: translateY(0);
  box-shadow: var(--shadow-sm);
}

.addButton:disabled {
  background: var(--interactive-disabled-bg);
  color: var(--interactive-disabled-text);
  border-color: var(--interactive-disabled-bg);
  cursor: not-allowed;
  opacity: 0.6;
  filter: none;
  transform: none;
}

/* Remove button - Professional red */
.removeButton {
  background: var(--color-danger);
  color: var(--text-on-primary);
  border: 1px solid var(--color-danger);
  box-shadow: var(--shadow-sm);
}

.removeButton:hover:not(:disabled) {
  background: var(--color-danger);
  filter: brightness(1.1);
  border-color: var(--color-danger);
  box-shadow: var(--shadow-md);
  transform: translateY(-1px);
}

.removeButton:active {
  transform: translateY(0);
  box-shadow: var(--shadow-sm);
}

/* Icon styling within action buttons */
.actionButton .buttonIcon {
  width: 14px;
  height: 14px;
  stroke-width: 2;
}

/* Action button container for proper spacing */
.actionButtonGroup {
  display: flex;
  gap: var(--space-xs);
  align-items: center;
  justify-content: center;
}

/* Large app scaling */
:global(.largeApp) .actionButton {
  min-width: 28px;
  min-height: 28px;
  padding: var(--space-xs);
}

:global(.largeApp) .actionButton .buttonIcon {
  width: 16px;
  height: 16px;
}

/* Small app adjustments */
:global(.smallApp) .actionButton {
  min-width: 20px;
  min-height: 20px;
  padding: var(--space-xxxs);
}

:global(.smallApp) .actionButton .buttonIcon {
  width: 12px;
  height: 12px;
}

/* Update existing button styles to be consistent */
.tableInput,
.tableSelect {
  border: 1.5px solid var(--border-light);
  transition: border-color var(--transition-speed-fast) var(--transition-ease), 
              box-shadow var(--transition-speed-fast) var(--transition-ease);
}

.tableInput:focus,
.tableSelect:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 2px rgba(0, 177, 199, 0.2);
}